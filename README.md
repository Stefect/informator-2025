# Informator - Real-time Screen Capture System# üì∫ CaptureStream - YouTube Live Clone<div align="center">



> Windows screen capture —Å–∏—Å—Ç–µ–º–∞ –∑ –º—ñ–Ω—ñ–º–∞–ª—å–Ω–∏–º —Å–ø–æ–∂–∏–≤–∞–Ω–Ω—è–º —Ä–µ—Å—É—Ä—Å—ñ–≤ –¥–ª—è –∫–æ–Ω–∫—É—Ä—Å—É



## üìã –û–ø–∏—Å –ø—Ä–æ—î–∫—Ç—É<div align="center"># üñ•Ô∏è CaptureStream



–°–∏—Å—Ç–µ–º–∞ –∑–∞—Ö–æ–ø–ª–µ–Ω–Ω—è –µ–∫—Ä–∞–Ω—É –≤ —Ä–µ–∞–ª—å–Ω–æ–º—É —á–∞—Å—ñ –¥–ª—è Windows 10/11 –∑ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è–º:

- **DXGI Desktop Duplication API** - –¥–ª—è –∑–∞—Ö–æ–ø–ª–µ–Ω–Ω—è –µ–∫—Ä–∞–Ω—É –∑ –º—ñ–Ω—ñ–º–∞–ª—å–Ω–∏–º –Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è–º

- **Node.js NAPI Addons** - –Ω–∞—Ç–∏–≤–Ω—ñ C++ –º–æ–¥—É–ª—ñ –¥–ª—è –ø—Ä—è–º–æ—ó —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—ó –∑ Windows API![Version](https://img.shields.io/badge/version-2.0.0-blue.svg)### –ü—Ä–æ—Ñ–µ—Å—ñ–π–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ –∑–∞—Ö–æ–ø–ª–µ–Ω–Ω—è —Ç–∞ —Ç—Ä–∞–Ω—Å–ª—è—Ü—ñ—ó –µ–∫—Ä–∞–Ω—É –≤ —Ä–µ–∞–ª—å–Ω–æ–º—É —á–∞—Å—ñ

- **WebSocket** - –¥–ª—è —Å—Ç—Ä—ñ–º—ñ–Ω–≥—É –≤—ñ–¥–µ–æ –≤ —Ä–µ–∞–ª—å–Ω–æ–º—É —á–∞—Å—ñ

- **TypeScript Backend** - –¥–ª—è –∫–µ—Ä—É–≤–∞–Ω–Ω—è –ø–æ—Ç–æ–∫–∞–º–∏ —Ç–∞ –∑'—î–¥–Ω–∞–Ω–Ω—è–º–∏![Node](https://img.shields.io/badge/node-%3E%3D18.0.0-brightgreen.svg)



## üéØ –í–∏–º–æ–≥–∏ –∫–æ–Ω–∫—É—Ä—Å—É (–≤–∏–∫–æ–Ω–∞–Ω—ñ)![MongoDB](https://img.shields.io/badge/mongodb-8.0%2B-green.svg)[![Live Demo](https://img.shields.io/badge/Live-capturestream.com-blue?style=for-the-badge)](http://capturestream.com/)



‚úÖ **1. TypeScript + NAPI** - –í–µ—Å—å –∫–æ–¥ –Ω–∞ TypeScript/JavaScript, –Ω–∞—Ç–∏–≤–Ω—ñ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏ –Ω–∞ C++ NAPI  ![TypeScript](https://img.shields.io/badge/typescript-5.2-blue.svg)[![GitHub](https://img.shields.io/badge/GitHub-informator--2025-181717?style=for-the-badge&logo=github)](https://github.com/Stefect/informator-2025)

‚úÖ **2. –ë–µ–∑ .exe —Ç–∞ ffmpeg** - –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ —Ç—ñ–ª—å–∫–∏ Node.js NAPI –∞–¥–¥–æ–Ω–∏  

‚úÖ **3. –°—Ç—Ä—É–∫—Ç—É—Ä–æ–≤–∞–Ω–∏–π –∫–æ–¥** - –ú–æ–Ω–æ—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π –∑ packages/  ![License](https://img.shields.io/badge/license-MIT-blue.svg)[![Node](https://img.shields.io/badge/Node.js-18+-339933?style=for-the-badge&logo=node.js)](https://nodejs.org/)

‚úÖ **4. –ë–µ–∑ –Ω–∞—Ç–∏–≤–Ω–∏—Ö –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π** - –ü—Ä–∞—Ü—é—î –Ω–∞ —á–∏—Å—Ç—ñ–π Windows –±–µ–∑ —ñ–Ω—Å—Ç–∞–ª—è—Ü—ñ–π  

‚úÖ **5. –°—Ç–∞–±—ñ–ª—å–Ω–∏–π —Å—Ç—Ä—ñ–º—ñ–Ω–≥** - DXGI –∑–∞–±–µ–∑–ø–µ—á—É—î –ø–æ—Å—Ç—ñ–π–Ω–µ –∑–∞—Ö–æ–ø–ª–µ–Ω–Ω—è  [![TypeScript](https://img.shields.io/badge/TypeScript-5.2-3178C6?style=for-the-badge&logo=typescript)](https://www.typescriptlang.org/)

‚úÖ **6. –ß–∏—Ç–∞–±–µ–ª—å–Ω–∏–π —Ç–µ–∫—Å—Ç** - 1280x720 –º—ñ–Ω—ñ–º—É–º, –º–∞—Å—à—Ç–∞–±—É—î—Ç—å—Å—è –¥–æ –Ω–∞—Ç–∏–≤–Ω–æ—ó —Ä–æ–∑–¥—ñ–ª—å–Ω–æ—Å—Ç—ñ  

‚úÖ **7. –ú—ñ–Ω—ñ–º—É–º 3 FPS** - –ù–∞–ª–∞—à—Ç–æ–≤—É—î—Ç—å—Å—è (–∑–∞—Ä–∞–∑ 5 FPS)  **–ü—Ä–æ—Ñ–µ—Å—ñ–π–Ω–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è live streaming –∑ –ø—ñ–¥—Ç—Ä–∏–º–∫–æ—é OBS Studio —Ç–∞ browser streaming**

‚úÖ **8. –î–æ 10 –ú–±—ñ—Ç/—Å** - BGRA RAW (–ø–æ—Ç—Ä–µ–±—É—î H.264 –µ–Ω–∫–æ–¥–µ—Ä–∞ –Ω–∞ Backend)  

‚úÖ **9. –ë–µ–∑ —Å–∫—Ä–∏–Ω—à–æ—Ç—ñ–≤** - DXGI Desktop Duplication, —Å–ø—Ä–∞–≤–∂–Ω—ñ–π –≤—ñ–¥–µ–æ–ø–æ—Ç—ñ–∫  [üöÄ Live Demo](http://capturestream.com/) | [üì∫ –°—Ç—Ä—ñ–º–µ—Ä](http://capturestream.com/host.html) | [üëÅÔ∏è –ì–ª—è–¥–∞—á](http://capturestream.com/viewer.html) | [üìñ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è](./DEPLOYMENT-GUIDE.md)



## üèóÔ∏è –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞[üåê Live Demo](http://capturestream.com) ‚Ä¢ [üìñ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è](#-–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è) ‚Ä¢ [üöÄ Quick Start](#-—à–≤–∏–¥–∫–∏–π-—Å—Ç–∞—Ä—Ç) ‚Ä¢ [üìä API](#-api-endpoints)



```---

Informator/

‚îú‚îÄ‚îÄ packages/</div>

‚îÇ   ‚îú‚îÄ‚îÄ backend-server/          # WebSocket —Å–µ—Ä–≤–µ—Ä (TypeScript)

‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ src/</div>

‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ index.ts        # –ì–æ–ª–æ–≤–Ω–∏–π —Å–µ—Ä–≤–µ—Ä

‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ websocket-handler.ts  # WebSocket –ª–æ–≥—ñ–∫–∞---

‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ stream-manager.ts     # –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –ø–æ—Ç–æ–∫–∞–º–∏

‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ client-manager.ts     # –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –∫–ª—ñ—î–Ω—Ç–∞–º–∏## üåü –ü—Ä–æ –ø—Ä–æ–µ–∫—Ç

‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ package.json

‚îÇ   ‚îÇ## üéØ –û–≥–ª—è–¥ –ø—Ä–æ–µ–∫—Ç—É

‚îÇ   ‚îú‚îÄ‚îÄ capture-client/          # –ö–ª—ñ—î–Ω—Ç –∑–∞—Ö–æ–ø–ª–µ–Ω–Ω—è (JavaScript + NAPI)

‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ native/              # C++ NAPI –∞–¥–¥–æ–Ω–∏**CaptureStream** (Informator) - —Ü–µ –ø–æ—Ç—É–∂–Ω–∏–π —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –∑–∞—Ö–æ–ø–ª–µ–Ω–Ω—è —Ç–∞ —Ç—Ä–∞–Ω—Å–ª—è—Ü—ñ—ó —Ä–æ–±–æ—á–æ–≥–æ —Å—Ç–æ–ª—É –≤ —Ä–µ–∞–ª—å–Ω–æ–º—É —á–∞—Å—ñ —á–µ—Ä–µ–∑ –≤–µ–±-–±—Ä–∞—É–∑–µ—Ä. –ü–æ–≤–Ω—ñ—Å—Ç—é –±–µ–∑–∫–æ—à—Ç–æ–≤–Ω–∏–π —Ç–∞ open-source.

‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ screen-capture.cpp   # DXGI –∑–∞—Ö–æ–ø–ª–µ–Ω–Ω—è

‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ encoder.cpp          # Media Foundation H.264CaptureStream - —Ü–µ –ø–æ–≤–Ω–æ—Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è live streaming, —â–æ –ø–æ—î–¥–Ω—É—î –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ YouTube Live –∑ –ø—Ä–æ—Ñ–µ—Å—ñ–π–Ω–∏–º–∏ —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º–∏ —Ç—Ä–∞–Ω—Å–ª—è—Ü—ñ—ó. –ü—ñ–¥—Ç—Ä–∏–º—É—î streaming —á–µ—Ä–µ–∑ –±—Ä–∞—É–∑–µ—Ä —Ç–∞ OBS Studio, –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω—É –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü—ñ—é –≤ HLS, –∑–∞–ø–∏—Å –ø–æ—Ç–æ–∫—ñ–≤ —Ç–∞ real-time –≤–∑–∞—î–º–æ–¥—ñ—é –∑ –≥–ª—è–¥–∞—á–∞–º–∏.

‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ module.cpp           # NAPI –±—ñ–Ω–¥–∏–Ω–≥–∏

‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ index.js            # –ì–æ–ª–æ–≤–Ω–∏–π –∫–ª—ñ—î–Ω—Ç## üéØ –û—Å–Ω–æ–≤–Ω—ñ –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ

‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ binding.gyp         # node-gyp –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è

‚îÇ   ‚îÇ### ‚ú® –ö–ª—é—á–æ–≤—ñ –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ

‚îÇ   ‚îî‚îÄ‚îÄ frontend/                # –í–µ–±-—ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å

‚îÇ       ‚îî‚îÄ‚îÄ public/- üé• **Live –≤—ñ–¥–µ–æ-—Å—Ç—Ä—ñ–º** –∑ —Ä–æ–±–æ—á–æ–≥–æ —Å—Ç–æ–ª—É (15/30/60 FPS)

‚îÇ           ‚îú‚îÄ‚îÄ index.html

‚îÇ           ‚îú‚îÄ‚îÄ test-viewer.html     # –¢–µ—Å—Ç–æ–≤–∏–π viewerüé• **Dual Streaming Mode**- üåê **–í–µ–±-—ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å** –¥–ª—è –ø–µ—Ä–µ–≥–ª—è–¥—É —Å—Ç—Ä—ñ–º—É

‚îÇ           ‚îî‚îÄ‚îÄ js/

‚îÇ               ‚îú‚îÄ‚îÄ stream-player.js- Browser streaming (Screen Capture API)- ‚ö° **–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è FPS** –≤ —Ä–µ–∞–ª—å–Ω–æ–º—É —á–∞—Å—ñ

‚îÇ               ‚îî‚îÄ‚îÄ websocket-client.js

‚îÇ- OBS Studio (RTMP)- üìä **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ—Ç–æ–∫—É** (–∫–∞–¥—Ä–∏, —Ä–æ–∑–º—ñ—Ä, FPS)

‚îú‚îÄ‚îÄ .env                         # –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è (–Ω–µ –∫–æ–º—ñ—Ç–∏—Ç—å—Å—è)

‚îú‚îÄ‚îÄ package.json                 # Root package- üé® **–ö—Ä–∞—Å–∏–≤–∏–π —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å** –∑ —É–∫—Ä–∞—ó–Ω—Å—å–∫–æ—é –º–æ–≤–æ—é

‚îî‚îÄ‚îÄ README.md                    # –¶—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è

```üì° **RTMP Server**- üîß **–ù–∞—Ç–∏–≤–Ω–∏–π –º–æ–¥—É–ª—å –∑–∞—Ö–æ–ø–ª–µ–Ω–Ω—è** (C++/N-API)



## üöÄ –®–≤–∏–¥–∫–∏–π —Å—Ç–∞—Ä—Ç- –ü—Ä–æ—Ñ–µ—Å—ñ–π–Ω–∏–π RTMP ingestion- ‚òÅÔ∏è **GitHub Codespaces –ø—ñ–¥—Ç—Ä–∏–º–∫–∞**



### –ü–µ—Ä–µ–¥—É–º–æ–≤–∏- FFmpeg –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è



- **Windows 10/11** (–æ–±–æ–≤'—è–∑–∫–æ–≤–æ)- Hardware acceleration support## üöÄ –®–≤–∏–¥–∫–∏–π —Å—Ç–∞—Ä—Ç

- **Node.js 18+** 

- **Visual Studio Build Tools 2019+** (–¥–ª—è –∫–æ–º–ø—ñ–ª—è—Ü—ñ—ó NAPI)

- **Python 3.x** (–¥–ª—è node-gyp)

üé¨ **HLS Conversion**### üåê –û–Ω–ª–∞–π–Ω –≤–µ—Ä—Å—ñ—è (–†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ)

### 1. –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π

- –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü—ñ—è RTMP ‚Üí HLS

```powershell

# Root- Low latency (5-8 seconds)**–ù–∞–π–ø—Ä–æ—Å—Ç—ñ—à–∏–π —Å–ø–æ—Å—ñ–±** - –≤–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ –æ–Ω–ª–∞–π–Ω –≤–µ—Ä—Å—ñ—é:

npm install

- –®–∏—Ä–æ–∫–∞ —Å—É–º—ñ—Å–Ω—ñ—Å—Ç—å

# Backend Server

cd packages/backend-server1. **–ì–æ–ª–æ–≤–Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫–∞**: [http://capturestream.com/](http://capturestream.com/)

npm install

üíæ **MongoDB Integration**

# Capture Client

cd packages/capture-client- Persistent storage2. **–î–ª—è —Å—Ç—Ä—ñ–º–µ—Ä–∞**: [http://capturestream.com/host.html](http://capturestream.com/host.html)

npm install

```- Stream metadata



### 2. –ö–æ–º–ø—ñ–ª—è—Ü—ñ—è NAPI –∞–¥–¥–æ–Ω—É- User management3. **–î–ª—è –≥–ª—è–¥–∞—á—ñ–≤**: [http://capturestream.com/viewer.html](http://capturestream.com/viewer.html)



```powershell- Recording tracking

cd packages/capture-client

npm run build:native### üíª –õ–æ–∫–∞–ª—å–Ω–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∞

```

üìù **Enhanced Logging**

### 3. –ó–∞–ø—É—Å–∫ —Å–∏—Å—Ç–µ–º–∏

- Winston –∑ daily rotation#### –í–∏–º–æ–≥–∏

**–¢–µ—Ä–º—ñ–Ω–∞–ª 1 - Backend Server:**

```powershell- Structured JSON logs- Node.js 16+ 

cd packages/backend-server

npm start- –ö–æ–ª—å–æ—Ä–æ–≤—ñ –ª–æ–≥–∏ –∑ –µ–º–æ–¥–∑—ñ- Windows (–∑ GDI –ø—ñ–¥—Ç—Ä–∏–º–∫–æ—é)

```

- –û–∫—Ä–µ–º—ñ —Ñ–∞–π–ª–∏ –¥–ª—è RTMP/WebSocket- Visual Studio Build Tools (–¥–ª—è –∫–æ–º–ø—ñ–ª—è—Ü—ñ—ó –Ω–∞—Ç–∏–≤–Ω–æ–≥–æ –º–æ–¥—É–ª—è)

**–¢–µ—Ä–º—ñ–Ω–∞–ª 2 - Capture Client:**

```powershell

cd packages/capture-client

npm startüé® **YouTube-style UI**### –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è

```

- –¢–µ–º–Ω–∞ —Ç–µ–º–∞

**–¢–µ—Ä–º—ñ–Ω–∞–ª 3 - –í—ñ–¥–∫—Ä–∏—Ç–∏ Viewer:**

```powershell- Responsive design1. –ö–ª–æ–Ω—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π:

# –í—ñ–¥–∫—Ä–∏–π—Ç–µ –±—Ä–∞—É–∑–µ—Ä

http://localhost:3001/test-viewer.html- Real-time updates

```

```bash

## üîß –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è

‚ö° **Performance Optimized**git clone https://github.com/Stefect/informator-2025.git

### Capture Client (.env)

- Frame bufferingcd informator-2025

```env

SERVER_URL=ws://localhost:3001- WebSocket compression```

CAPTURE_WIDTH=1280

CAPTURE_HEIGHT=720- Memory management

CAPTURE_FPS=5

```- Auto garbage collection2. –í—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ:



### Backend Server (.env)```bash



```envüìä **Real-time Analytics**npm install

PORT=3001

NODE_ENV=development- Viewers count```

LOG_LEVEL=info

```- FPS tracking



## üìä –¢–µ—Ö–Ω—ñ—á–Ω—ñ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏- Bandwidth monitoring3. –°–∫–æ–º–ø—ñ–ª—é–π—Ç–µ –ø—Ä–æ–µ–∫—Ç:



### –ü–æ—Ç–æ—á–Ω–∞ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—è- System health checks```bash



| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–Ω—è | –°—Ç–∞—Ç—É—Å |npm run build

|----------|----------|--------|

| –†–æ–∑–¥—ñ–ª—å–Ω—ñ—Å—Ç—å | 1280x720 | ‚úÖ |---```

| FPS | 5 | ‚úÖ |

| –§–æ—Ä–º–∞—Ç –¥–∞–Ω–∏—Ö | BGRA RAW | ‚úÖ |

| –†–æ–∑–º—ñ—Ä –∫–∞–¥—Ä—É | 3.6 MB | ‚ö†Ô∏è |

| –¢—Ä–∞—Ñ—ñ–∫ | ~144 –ú–±—ñ—Ç/—Å | ‚ùå (–ø–æ—Ç—Ä–µ–±—É—î H.264) |## üèóÔ∏è –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞4. –ó–∞–ø—É—Å—Ç—ñ—Ç—å —Å–µ—Ä–≤–µ—Ä:

| CPU (Client) | <5% | ‚úÖ |

| RAM (Client) | <100 MB | ‚úÖ |```bash



### –ù–µ–æ–±—Ö—ñ–¥–Ω—ñ –ø–æ–∫—Ä–∞—â–µ–Ω–Ω—è### –¢–µ—Ö–Ω–æ–ª–æ–≥—ñ—á–Ω–∏–π —Å—Ç–µ–∫npm start



1. **H.264 –µ–Ω–∫–æ–¥–µ—Ä** - –¥–æ–¥–∞—Ç–∏ –Ω–∞ Backend (–¥–æ–∑–≤–æ–ª–µ–Ω–æ –¢–ó –ø—É–Ω–∫—Ç 4)```

   - –ó–º–µ–Ω—à–∏—Ç—å —Ç—Ä–∞—Ñ—ñ–∫ –¥–æ ~2-5 –ú–±—ñ—Ç/—Å

   - –í–∏–∫–æ–Ω–∞—î –≤–∏–º–æ–≥—É #8 (–¥–æ 10 –ú–±—ñ—Ç/—Å)#### Backend



2. **Media Foundation —Ñ—ñ–∫—Å** - –≤–∏–ø—Ä–∞–≤–∏—Ç–∏ –µ–Ω–∫–æ–¥–µ—Ä –≤ NAPI- **Runtime**: Node.js 18+5. –í—ñ–¥–∫—Ä–∏–π—Ç–µ –±—Ä–∞—É–∑–µ—Ä:

   - –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ Backend –µ–Ω–∫–æ–¥–µ—Ä—É

   - –ö–æ–¥—É–≤–∞–Ω–Ω—è –Ω–∞ –∫–ª—ñ—î–Ω—Ç—ñ (–º–µ–Ω—à–µ –Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –Ω–∞ Backend)- **Language**: TypeScript 5.2- **–î–ª—è —Å—Ç—Ä—ñ–º–µ—Ä–∞**: http://localhost:3001/host.html



## üõ†Ô∏è –†–æ–∑—Ä–æ–±–∫–∞- **Framework**: Express.js- **–î–ª—è –≥–ª—è–¥–∞—á—ñ–≤**: http://localhost:3001/viewer.html



### –ö–æ–º–ø—ñ–ª—è—Ü—ñ—è Backend- **WebSocket**: ws library



```powershell- **Database**: MongoDB 8.0 + Mongoose### ‚òÅÔ∏è –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –≤–ª–∞—Å–Ω–æ–≥–æ Codespace

cd packages/backend-server

npm run build- **RTMP**: node-media-server

```

- **Transcoding**: FFmpeg1. –ü–µ—Ä–µ–π–¥—ñ—Ç—å –Ω–∞ [GitHub Repository](https://github.com/Stefect/informator-2025)

### –ü–µ—Ä–µ–∫–æ–º–ø—ñ–ª—è—Ü—ñ—è NAPI

- **Logging**: Winston2. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å "Code" ‚Üí "Codespaces" ‚Üí "Create codespace on main"

```powershell

cd packages/capture-client- **Process Manager**: PM23. –î–æ—á–µ–∫–∞–π—Ç–µ—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ–≥–æ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è

npm run clean       # –í–∏–¥–∞–ª–∏—Ç–∏ build/

npm run build:native4. –í—ñ–¥–∫—Ä–∏–π—Ç–µ –ø–æ—Ä—Ç–∏ 3001 –¥–ª—è –ø—É–±–ª—ñ—á–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø—É

```

#### Frontend

### –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è

- **Core**: HTML5 + CSS3 + Vanilla JavaScript## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç—É

```powershell

# API Endpoints- **Video**: Canvas API

curl http://localhost:3001/health

curl http://localhost:3001/api/streams- **Streaming**: Screen Capture API```

curl http://localhost:3001/api/clients

- **Communication**: WebSocket clientinformator-2025/

# WebSocket –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ –≤ –±—Ä–∞—É–∑–µ—Ä—ñ

ws://localhost:3001- **Theme**: YouTube Dark (custom)‚îú‚îÄ‚îÄ src/

```

‚îÇ   ‚îú‚îÄ‚îÄ server.ts          # –û—Å–Ω–æ–≤–Ω–∏–π —Å–µ—Ä–≤–µ—Ä

## üìù API Documentation

#### Infrastructure‚îÇ   ‚îî‚îÄ‚îÄ client.ts          # –ö–ª—ñ—î–Ω—Ç –∑–∞—Ö–æ–ø–ª–µ–Ω–Ω—è

### WebSocket Events

- **Database**: MongoDB (local/Atlas)‚îú‚îÄ‚îÄ host.html             # –Ü–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å—Ç—Ä—ñ–º–µ—Ä–∞

**Client ‚Üí Server:**

- `identification` - –Ü–¥–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è –∫–ª—ñ—î–Ω—Ç–∞- **Process Management**: PM2‚îú‚îÄ‚îÄ viewer.html           # –Ü–Ω—Ç–µ—Ä—Ñ–µ–π—Å –≥–ª—è–¥–∞—á–∞

- `frame_metadata` - –ú–µ—Ç–∞–¥–∞–Ω—ñ –∫–∞–¥—Ä—É

- Binary data - –ë—ñ–Ω–∞—Ä–Ω—ñ –¥–∞–Ω—ñ –∫–∞–¥—Ä—É- **Reverse Proxy**: Nginx (optional)‚îú‚îÄ‚îÄ package.json



**Server ‚Üí Client:**- **CDN**: Cloudflare (optional)‚îú‚îÄ‚îÄ tsconfig.json

- `welcome` - –ü—Ä–∏–≤—ñ—Ç–∞–Ω–Ω—è –ø—ñ—Å–ª—è –∑'—î–¥–Ω–∞–Ω–Ω—è

- `stream_created` - –ü–æ—Ç—ñ–∫ —Å—Ç–≤–æ—Ä–µ–Ω–æ- **Domain**: capturestream.com‚îî‚îÄ‚îÄ README.md

- `command` - –ö–æ–º–∞–Ω–¥–∞ (start_capture, stop_capture)

```

### HTTP Endpoints

### –°—Ö–µ–º–∞ —Å–∏—Å—Ç–µ–º–∏

- `GET /health` - –°—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–µ—Ä–∞

- `GET /api/streams` - –°–ø–∏—Å–æ–∫ –∞–∫—Ç–∏–≤–Ω–∏—Ö –ø–æ—Ç–æ–∫—ñ–≤## üéÆ –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è

- `GET /api/clients` - –°–ø–∏—Å–æ–∫ –ø—ñ–¥–∫–ª—é—á–µ–Ω–∏—Ö –∫–ª—ñ—î–Ω—Ç—ñ–≤

```

## üêõ –í—ñ–¥–æ–º—ñ –ø—Ä–æ–±–ª–µ–º–∏

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê1. **–ó–∞–ø—É—Å—Ç—ñ—Ç—å —Å–µ—Ä–≤–µ—Ä** –∫–æ–º–∞–Ω–¥–æ—é `npm start`

1. **Media Foundation –µ–Ω–∫–æ–¥–µ—Ä** - –Ω–µ —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑—É—î—Ç—å—Å—è (HRESULT: 0xC00D6D77)

   - –†—ñ—à–µ–Ω–Ω—è: –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ RAW + Backend H.264‚îÇ                    CaptureStream Platform                    ‚îÇ2. **–°—Ç—Ä—ñ–º–µ—Ä** –≤—ñ–¥–∫—Ä–∏–≤–∞—î `host.html` –¥–ª—è –∫–æ–Ω—Ç—Ä–æ–ª—é —Ç—Ä–∞–Ω—Å–ª—è—Ü—ñ—ó

   

2. **–í–∏—Å–æ–∫–∏–π —Ç—Ä–∞—Ñ—ñ–∫** - 144 –ú–±—ñ—Ç/—Å –∑–∞–º—ñ—Å—Ç—å 10 –ú–±—ñ—Ç/—Å‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§3. **–ì–ª—è–¥–∞—á—ñ** –≤—ñ–¥–∫—Ä–∏–≤–∞—é—Ç—å `viewer.html` –¥–ª—è –ø–µ—Ä–µ–≥–ª—è–¥—É

   - –†—ñ—à–µ–Ω–Ω—è: –¥–æ–¥–∞—Ç–∏ H.264 –µ–Ω–∫–æ–¥–µ—Ä

‚îÇ                                                               ‚îÇ4. **–ù–∞—Å–æ–ª–æ–¥–∂—É–π—Ç–µ—Å—å** –ø–ª–∞–≤–Ω–∏–º live –≤—ñ–¥–µ–æ –∑ —Ä–æ–±–æ—á–æ–≥–æ —Å—Ç–æ–ª—É!

3. **Test viewer** - –ø–æ–∫–∞–∑—É—î –∑–µ–ª–µ–Ω–∏–π –≥—Ä–∞–¥—ñ—î–Ω—Ç –∑–∞–º—ñ—Å—Ç—å –µ–∫—Ä–∞–Ω—É

   - –ü–æ—Ç—Ä–µ–±—É—î –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü—ñ—ó BGRA ‚Üí Canvas –ø—Ä–∞–≤–∏–ª—å–Ω–æ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê              ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê              ‚îÇ



## üìú –õ—ñ—Ü–µ–Ω–∑—ñ—è‚îÇ  ‚îÇ   Browser   ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ3001‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ  WebSocket   ‚îÇ              ‚îÇ## ‚öôÔ∏è –¢–µ—Ö–Ω–æ–ª–æ–≥—ñ—ó



MIT License - —Å—Ç–≤–æ—Ä–µ–Ω–æ –¥–ª—è –∫–æ–Ω–∫—É—Ä—Å—É Informator 2025‚îÇ  ‚îÇ  Streamer   ‚îÇ              ‚îÇ    Server    ‚îÇ              ‚îÇ



## üë• –ê–≤—Ç–æ—Ä–∏‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò              ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò              ‚îÇ- **Backend**: Node.js, Express.js, WebSocket (ws)



Informator Team - [GitHub](https://github.com/Stefect/informator-2025)‚îÇ                                      ‚îÇ                       ‚îÇ- **Frontend**: HTML5, Canvas API, WebSocket API



---‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê              ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê              ‚îÇ- **Native**: C++, N-API, Windows GDI



**–í–µ—Ä—Å—ñ—è:** 2.0.0 (NAPI + DXGI Implementation)  ‚îÇ  ‚îÇ     OBS     ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ1935‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ     RTMP     ‚îÇ              ‚îÇ- **Build**: node-gyp, Visual Studio Build Tools

**–î–∞—Ç–∞:** 25 –∂–æ–≤—Ç–Ω—è 2025  

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ë–∞–∑–æ–≤–∞ —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω—ñ—Å—Ç—å –ø—Ä–∞—Ü—é—î, –ø–æ—Ç—Ä–µ–±—É—î H.264 –µ–Ω–∫–æ–¥–µ—Ä–∞‚îÇ  ‚îÇ   Studio    ‚îÇ              ‚îÇ    Server    ‚îÇ              ‚îÇ


‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò              ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò              ‚îÇ## üìù –ö–æ–º–∞–Ω–¥–∏

‚îÇ                                      ‚îÇ                       ‚îÇ

‚îÇ                               ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê               ‚îÇ- `npm run dev` - –ó–∞–ø—É—Å–∫ –≤ —Ä–µ–∂–∏–º—ñ —Ä–æ–∑—Ä–æ–±–∫–∏

‚îÇ                               ‚îÇ    FFmpeg    ‚îÇ               ‚îÇ- `npm run build` - –ö–æ–º–ø—ñ–ª—è—Ü—ñ—è TypeScript

‚îÇ                               ‚îÇ  Transcoding ‚îÇ               ‚îÇ- `npm start` - –ó–∞–ø—É—Å–∫ —Å–∫–æ–º–ø—ñ–ª—å–æ–≤–∞–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞

‚îÇ                               ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò               ‚îÇ- `npm run clean` - –û—á–∏—Å—Ç–∫–∞ –ø–∞–ø–∫–∏ dist

‚îÇ                                      ‚îÇ                       ‚îÇ

‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê              ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê              ‚îÇ## üéØ –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è FPS

‚îÇ  ‚îÇ   Viewers   ‚îÇ‚óÄ‚îÄ‚îÄ‚îÄ‚îÄ8888‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ HLS Server   ‚îÇ              ‚îÇ

‚îÇ  ‚îÇ  (Browser)  ‚îÇ              ‚îÇ   (HTTP)     ‚îÇ              ‚îÇ–ü—Ä–æ–µ–∫—Ç –ø—ñ–¥—Ç—Ä–∏–º—É—î –¥–∏–Ω–∞–º—ñ—á–Ω—É –∑–º—ñ–Ω—É —à–≤–∏–¥–∫–æ—Å—Ç—ñ –∫–∞–¥—Ä—ñ–≤:

‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò              ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò              ‚îÇ- **15 FPS** - –µ–∫–æ–Ω–æ–º—ñ—è —Ä–µ—Å—É—Ä—Å—ñ–≤, —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞ —è–∫—ñ—Å—Ç—å

‚îÇ                                      ‚îÇ                       ‚îÇ- **30 FPS** - –ø–ª–∞–≤–Ω–µ –≤—ñ–¥–µ–æ (—Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ)

‚îÇ                               ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê               ‚îÇ- **60 FPS** - –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞ –ø–ª–∞–≤–Ω—ñ—Å—Ç—å –¥–ª—è —ñ–≥–æ—Ä

‚îÇ                               ‚îÇ   MongoDB    ‚îÇ               ‚îÇ

‚îÇ                               ‚îÇ  (Database)  ‚îÇ               ‚îÇ## ‚ö†Ô∏è –û–±–º–µ–∂–µ–Ω–Ω—è

‚îÇ                               ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò               ‚îÇ

‚îÇ                                                               ‚îÇ- –ü—Ä–∞—Ü—é—î –ª–∏—à–µ –Ω–∞ Windows (—á–µ—Ä–µ–∑ GDI API)

‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò- –ü–æ—Ç—Ä–µ–±—É—î –∫–æ–º–ø—ñ–ª—è—Ü—ñ—ó –Ω–∞—Ç–∏–≤–Ω–æ–≥–æ –º–æ–¥—É–ª—è

```- –í–∏—Å–æ–∫–µ –Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –ø—Ä–∏ 60 FPS



---## ü§ù –í–Ω–µ—Å–æ–∫ —É –ø—Ä–æ–µ–∫—Ç



## üöÄ –®–≤–∏–¥–∫–∏–π —Å—Ç–∞—Ä—Ç1. –§–æ—Ä–∫–Ω—ñ—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π

2. –°—Ç–≤–æ—Ä—ñ—Ç—å feature-–≥—ñ–ª–∫—É: `git checkout -b feature/amazing-feature`

### –ü–µ—Ä–µ–¥—É–º–æ–≤–∏3. –ó–∞–∫–æ–º—ñ—Ç—å—Ç–µ –∑–º—ñ–Ω–∏: `git commit -m 'Add amazing feature'`

4. –ó–∞–ø—É—à—ñ—Ç—å –≤ –≥—ñ–ª–∫—É: `git push origin feature/amazing-feature`

–ü–µ—Ä–µ–¥ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è–º –ø–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—å, —â–æ —É –≤–∞—Å –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ:5. –°—Ç–≤–æ—Ä—ñ—Ç—å Pull Request



- ‚úÖ **Node.js** >= 18.0.0 ([Download](https://nodejs.org/))‚≠ê –ü–æ—Å—Ç–∞–≤—Ç–µ –∑—ñ—Ä–∫—É, —è–∫—â–æ –ø—Ä–æ–µ–∫—Ç –≤–∞–º —Å–ø–æ–¥–æ–±–∞–≤—Å—è!

- ‚úÖ **MongoDB** >= 8.0 ([Download](https://www.mongodb.com/try/download/community))
- ‚úÖ **FFmpeg** ([Download](https://ffmpeg.org/download.html))
- ‚úÖ **Git** ([Download](https://git-scm.com/))

### –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è

#### 1Ô∏è‚É£ –ö–ª–æ–Ω—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π

```bash
git clone https://github.com/Stefect/informator-2025.git
cd informator-2025
```

#### 2Ô∏è‚É£ –í—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ

```bash
npm install
```

#### 3Ô∏è‚É£ –ù–∞–ª–∞—à—Ç—É–π—Ç–µ MongoDB

**–í–∞—Ä—ñ–∞–Ω—Ç A - –õ–æ–∫–∞–ª—å–Ω–æ (Windows):**
```powershell
# –ó–∞–ø—É—Å—Ç—ñ—Ç—å MongoDB —Å–ª—É–∂–±—É
net start MongoDB

# –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞
mongod --version
```

**–í–∞—Ä—ñ–∞–Ω—Ç B - Cloud (MongoDB Atlas):**
1. –°—Ç–≤–æ—Ä—ñ—Ç—å –±–µ–∑–∫–æ—à—Ç–æ–≤–Ω–∏–π –∫–ª–∞—Å—Ç–µ—Ä –Ω–∞ [MongoDB Atlas](https://cloud.mongodb.com)
2. –û—Ç—Ä–∏–º–∞–π—Ç–µ connection string
3. –î–æ–¥–∞–π—Ç–µ IP –∞–¥—Ä–µ—Å—É –¥–æ whitelist

#### 4Ô∏è‚É£ –ù–∞–ª–∞—à—Ç—É–π—Ç–µ environment

–°—Ç–≤–æ—Ä—ñ—Ç—å —Ñ–∞–π–ª `.env`:

```env
# MongoDB
MONGODB_URI=mongodb://localhost:27017/capturestream

# Server
PORT=3001
HOST=0.0.0.0
NODE_ENV=development

# Domain (Production)
DOMAIN=capturestream.com
PUBLIC_URL=http://capturestream.com

# Logging
LOG_LEVEL=info

# RTMP
RTMP_PORT=1935
HTTP_PORT=8888

# Security
JWT_SECRET=your-secret-key-change-in-production
```

#### 5Ô∏è‚É£ –°–∫–æ–º–ø—ñ–ª—é–π—Ç–µ TypeScript

```bash
npm run build
```

#### 6Ô∏è‚É£ –ó–∞–ø—É—Å—Ç—ñ—Ç—å —Å–µ—Ä–≤–µ—Ä–∏

```bash
# –û–±–∏–¥–≤–∞ —Å–µ—Ä–≤–µ—Ä–∏ (WebSocket + RTMP)
npm run start:all

# –ê–±–æ –æ–∫—Ä–µ–º–æ
npm start        # WebSocket server only
npm run rtmp     # RTMP server only
```

#### 7Ô∏è‚É£ –í—ñ–¥–∫—Ä–∏–π—Ç–µ –±—Ä–∞—É–∑–µ—Ä

```
http://localhost:3001
```

üéâ **–ì–æ—Ç–æ–≤–æ!** –í–∞—à CaptureStream –∑–∞–ø—É—â–µ–Ω–∏–π!

---

## üìñ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è

### üìö –û—Å–Ω–æ–≤–Ω—ñ –≥–∞–π–¥–∏

| –î–æ–∫—É–º–µ–Ω—Ç | –û–ø–∏—Å |
|----------|------|
| [MONGODB-SETUP.md](./MONGODB-SETUP.md) | –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è MongoDB (–ª–æ–∫–∞–ª—å–Ω–æ/Atlas) |
| [LOGGING-GUIDE.md](./LOGGING-GUIDE.md) | –°–∏—Å—Ç–µ–º–∞ –ª–æ–≥—É–≤–∞–Ω–Ω—è Winston |
| [RTMP-SETUP.md](./RTMP-SETUP.md) | OBS Studio –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è |
| [ARCHITECTURE.md](./ARCHITECTURE.md) | –î–µ—Ç–∞–ª—å–Ω–∞ –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞ |
| [PRODUCTION-DEPLOYMENT.md](./PRODUCTION-DEPLOYMENT.md) | Production deployment |
| [OPTIMIZATION.md](./OPTIMIZATION.md) | Performance —Ç—É—é–Ω—ñ–Ω–≥ |

### üîß –†–æ–∑—Ä–æ–±–∫–∞

| –î–æ–∫—É–º–µ–Ω—Ç | –û–ø–∏—Å |
|----------|------|
| [DATABASE-CHANGELOG.md](./DATABASE-CHANGELOG.md) | –ó–º—ñ–Ω–∏ –≤ –ë–î |
| [IMPLEMENTATION-SUMMARY.md](./IMPLEMENTATION-SUMMARY.md) | –û–≥–ª—è–¥ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó |
| [QUICK-START-DB.md](./QUICK-START-DB.md) | –®–≤–∏–¥–∫–∏–π —Å—Ç–∞—Ä—Ç –∑ –ë–î |

---

## üéÆ –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è

### üåê Browser Streaming

1. –í—ñ–¥–∫—Ä–∏–π—Ç–µ **Studio**: `http://localhost:3001/studio.html`
2. –ó–∞–ø–æ–≤–Ω—ñ—Ç—å —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é:
   - –ù–∞–∑–≤–∞ —Å—Ç—Ä—ñ–º—É
   - –û–ø–∏—Å
   - –ö–∞—Ç–µ–≥–æ—Ä—ñ—è (–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ)
3. –ù–∞–ª–∞—à—Ç—É–π—Ç–µ —è–∫—ñ—Å—Ç—å:
   - –†–æ–∑–¥—ñ–ª—å–Ω—ñ—Å—Ç—å (720p/1080p)
   - FPS (15/30/60)
   - JPEG Quality (50-100%)
4. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å **"–ó–∞–ø—É—Å—Ç–∏—Ç–∏ —Ç—Ä–∞–Ω—Å–ª—è—Ü—ñ—é"**
5. –î–æ–∑–≤–æ–ª—å—Ç–µ –¥–æ—Å—Ç—É–ø –¥–æ –µ–∫—Ä–∞–Ω—É
6. –í–∞—à —Å—Ç—Ä—ñ–º –∑'—è–≤–∏—Ç—å—Å—è –Ω–∞ –≥–æ–ª–æ–≤–Ω—ñ–π —Å—Ç–æ—Ä—ñ–Ω—Ü—ñ!

### üì° OBS Studio Streaming

1. –í—ñ–¥–∫—Ä–∏–π—Ç–µ **OBS Studio**
2. Settings ‚Üí Stream
3. –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è:
   ```
   Service:    Custom
   Server:     rtmp://localhost:1935/live
   Stream Key: your_stream_name
   ```
4. **Start Streaming**
5. –ü–µ—Ä–µ–≥–ª—è–¥:
   - HLS: `http://localhost:8888/live/your_stream_name/index.m3u8`
   - Web: `http://localhost:3001/watch.html?stream=your_stream_name`

### üëÅÔ∏è –ü–µ—Ä–µ–≥–ª—è–¥ —Å—Ç—Ä—ñ–º—ñ–≤

- **–ì–æ–ª–æ–≤–Ω–∞**: `http://localhost:3001`
- **–°—Ç–æ—Ä—ñ–Ω–∫–∞ —Å—Ç—Ä—ñ–º—É**: `http://localhost:3001/watch.html?stream={id}`
- **HLS –ø–ª–µ—î—Ä**: `http://localhost:8888/live/{name}/index.m3u8`

---

## üìä API Endpoints

### REST API

#### Streams

```http
GET    /api/streams          # –°–ø–∏—Å–æ–∫ –∞–∫—Ç–∏–≤–Ω–∏—Ö —Å—Ç—Ä—ñ–º—ñ–≤
GET    /api/streams/:id      # –î–µ—Ç–∞–ª—ñ —Å—Ç—Ä—ñ–º—É
POST   /api/streams          # –°—Ç–≤–æ—Ä–∏—Ç–∏ —Å—Ç—Ä—ñ–º
PUT    /api/streams/:id      # –û–Ω–æ–≤–∏—Ç–∏ —Å—Ç—Ä—ñ–º
DELETE /api/streams/:id      # –í–∏–¥–∞–ª–∏—Ç–∏ —Å—Ç—Ä—ñ–º
```

#### System

```http
GET    /api/status           # –°—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–µ—Ä–∞
GET    /api/health           # Health check
GET    /api/metrics          # –ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ
```

### WebSocket Events

#### Client ‚Üí Server

```javascript
// –†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è
{
  type: 'register',
  role: 'streamer' | 'viewer',
  userInfo: {
    fullName: string,
    streamTitle: string,
    quality: string,
    frameRate: number
  }
}

// –§—Ä–µ–π–º –≤—ñ–¥–µ–æ
{
  type: 'frame',
  data: ArrayBuffer,
  timestamp: number
}

// –ó–∞–ø–∏—Ç —Å–ø–∏—Å–∫—É —Å—Ç—Ä—ñ–º—ñ–≤
{
  type: 'getStreams'
}
```

#### Server ‚Üí Client

```javascript
// –ü—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è –∑'—î–¥–Ω–∞–Ω–Ω—è
{
  type: 'connected',
  clientId: string,
  serverInfo: {
    version: string,
    capabilities: string[]
  }
}

// –§—Ä–µ–π–º –≤—ñ–¥–µ–æ
{
  type: 'frame',
  data: ArrayBuffer,
  timestamp: number,
  fps: number
}

// –°–ø–∏—Å–æ–∫ —Å—Ç—Ä—ñ–º—ñ–≤
{
  type: 'streams_list',
  streams: Array<Stream>
}

// –°—Ç—Ä—ñ–º —Ä–æ–∑–ø–æ—á–∞—Ç–æ
{
  type: 'stream_started',
  streamId: string,
  streamer: UserInfo
}
```

---

## üóÑÔ∏è Database Schema

### Streams Collection

```typescript
interface IStream {
  streamId: string;              // –£–Ω—ñ–∫–∞–ª—å–Ω–∏–π ID
  title: string;                 // –ù–∞–∑–≤–∞ —Å—Ç—Ä—ñ–º—É
  description?: string;          // –û–ø–∏—Å
  streamer: {
    id: string;                  // ID —Å—Ç—Ä–∏–º–µ—Ä–∞
    username: string;            // –Ü–º'—è
    avatar?: string;             // –ê–≤–∞—Ç–∞—Ä URL
  };
  status: 'live' | 'ended' | 'scheduled';
  viewers: number;               // –ü–æ—Ç–æ—á–Ω—ñ –≥–ª—è–¥–∞—á—ñ
  peakViewers: number;           // –ü—ñ–∫ –≥–ª—è–¥–∞—á—ñ–≤
  startTime: Date;               // –ß–∞—Å —Å—Ç–∞—Ä—Ç—É
  endTime?: Date;                // –ß–∞—Å –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è
  duration?: number;             // –¢—Ä–∏–≤–∞–ª—ñ—Å—Ç—å (—Å–µ–∫)
  thumbnail?: string;            // –ü—Ä–µ–≤—å—é URL
  category?: string;             // –ö–∞—Ç–µ–≥–æ—Ä—ñ—è
  tags: string[];                // –¢–µ–≥–∏
  quality: {
    resolution: string;          // "1920x1080"
    fps: number;                 // 30
    bitrate: number;             // 2500
  };
  rtmpUrl?: string;              // RTMP URL
  hlsUrl?: string;               // HLS URL
  recordingPath?: string;        // –®–ª—è—Ö –¥–æ –∑–∞–ø–∏—Å—É
  stats: {
    totalViews: number;          // –í—Å—å–æ–≥–æ –ø–µ—Ä–µ–≥–ª—è–¥—ñ–≤
    likes: number;               // –õ–∞–π–∫–∏
    comments: number;            // –ö–æ–º–µ–Ω—Ç–∞—Ä—ñ
    shares: number;              // –®–µ–π—Ä–∏
  };
  metadata: {
    serverVersion: string;       // "2.0.0"
    captureSource: 'browser' | 'obs' | 'native';
    encoding: string;            // "h264"
  };
  createdAt: Date;
  updatedAt: Date;
}
```

### Users Collection

```typescript
interface IUser {
  userId: string;
  username: string;              // –£–Ω—ñ–∫–∞–ª—å–Ω–∏–π —é–∑–µ—Ä–Ω–µ–π–º
  email: string;                 // Email
  avatar?: string;               // –ê–≤–∞—Ç–∞—Ä URL
  bio?: string;                  // –ë—ñ–æ–≥—Ä–∞—Ñ—ñ—è
  role: 'viewer' | 'streamer' | 'admin';
  isVerified: boolean;           // –í–µ—Ä–∏—Ñ—ñ–∫–∞—Ü—ñ—è
  stats: {
    totalStreams: number;        // –í—Å—å–æ–≥–æ —Å—Ç—Ä—ñ–º—ñ–≤
    totalViews: number;          // –í—Å—å–æ–≥–æ –ø–µ—Ä–µ–≥–ª—è–¥—ñ–≤
    followers: number;           // –ü—ñ–¥–ø–∏—Å–Ω–∏–∫–∏
    following: number;           // –ü—ñ–¥–ø–∏—Å–∫–∏
  };
  streamingKey?: string;         // RTMP stream key
  preferences: {
    defaultQuality: string;      // "720p"
    defaultFps: number;          // 30
    notifications: boolean;      // true
    privacy: 'public' | 'unlisted' | 'private';
  };
  socialLinks?: {
    twitter?: string;
    youtube?: string;
    discord?: string;
  };
  createdAt: Date;
  updatedAt: Date;
  lastLoginAt?: Date;
}
```

### Recordings Collection

```typescript
interface IRecording {
  recordingId: string;
  streamId: string;              // ID –æ—Ä–∏–≥—ñ–Ω–∞–ª—å–Ω–æ–≥–æ —Å—Ç—Ä—ñ–º—É
  streamerId: string;            // ID —Å—Ç—Ä–∏–º–µ—Ä–∞
  title: string;                 // –ù–∞–∑–≤–∞ –∑–∞–ø–∏—Å—É
  description?: string;          // –û–ø–∏—Å
  filePath: string;              // –®–ª—è—Ö –¥–æ —Ñ–∞–π–ª—É
  fileSize: number;              // –†–æ–∑–º—ñ—Ä (bytes)
  duration: number;              // –¢—Ä–∏–≤–∞–ª—ñ—Å—Ç—å (—Å–µ–∫)
  thumbnail?: string;            // –ü—Ä–µ–≤—å—é URL
  quality: {
    resolution: string;
    fps: number;
    bitrate: number;
    codec: string;               // "h264"
  };
  views: number;                 // –ü–µ—Ä–µ–≥–ª—è–¥–∏
  likes: number;                 // –õ–∞–π–∫–∏
  status: 'processing' | 'ready' | 'failed' | 'deleted';
  publishedAt?: Date;
  createdAt: Date;
  updatedAt: Date;
}
```

---

## üìù Logging

### Log Levels

```
ERROR ‚Üí WARN ‚Üí INFO ‚Üí DEBUG
```

### Log Files

```
logs/
‚îú‚îÄ‚îÄ combined-YYYY-MM-DD.log     # –í—Å—ñ –ª–æ–≥–∏ (14 –¥–Ω—ñ–≤, 20MB max)
‚îú‚îÄ‚îÄ error-YYYY-MM-DD.log        # –ü–æ–º–∏–ª–∫–∏ (30 –¥–Ω—ñ–≤, 20MB max)
‚îú‚îÄ‚îÄ rtmp-YYYY-MM-DD.log         # RTMP –ø–æ–¥—ñ—ó (7 –¥–Ω—ñ–≤, 10MB max)
‚îú‚îÄ‚îÄ websocket-YYYY-MM-DD.log    # WebSocket –ø–æ–¥—ñ—ó (7 –¥–Ω—ñ–≤, 10MB max)
‚îú‚îÄ‚îÄ debug-YYYY-MM-DD.log        # Debug (dev only, 7 –¥–Ω—ñ–≤)
‚îú‚îÄ‚îÄ exceptions.log              # –ù–µ–æ–±—Ä–æ–±–ª–µ–Ω—ñ –ø–æ–º–∏–ª–∫–∏
‚îî‚îÄ‚îÄ rejections.log              # Promise rejections
```

### Helper Methods

```typescript
import { log } from './logger';

log.start('Server starting');           // üöÄ
log.stop('Server stopped');             // üõë
log.success('Operation successful');    // ‚úÖ
log.error('Error occurred', { error }); // ‚ùå
log.warn('Warning message');            // ‚ö†Ô∏è
log.info('Information');                // ‚ÑπÔ∏è
log.debug('Debug info');                // üîç
log.connect('Client connected');        // üîå
log.disconnect('Client disconnected');  // üîå‚ùå
log.streamStart('Stream started');      // üì°
log.streamEnd('Stream ended');          // üì°‚úì
log.dbConnect('Database connected');    // üíæ
log.dbQuery('Query executed');          // üîé
log.performance('High CPU usage');      // ‚ö°
log.fileWrite('File saved');            // üíæ
log.fileRead('File loaded');            // üìñ
```

### –ü–µ—Ä–µ–≥–ª—è–¥ –ª–æ–≥—ñ–≤

```powershell
# Real-time –≤—Å—ñ –ª–æ–≥–∏
Get-Content logs\combined-2024-10-06.log -Wait -Tail 50

# –¢—ñ–ª—å–∫–∏ –ø–æ–º–∏–ª–∫–∏
Get-Content logs\error-2024-10-06.log -Wait -Tail 50

# RTMP –ø–æ–¥—ñ—ó
Get-Content logs\rtmp-2024-10-06.log -Wait -Tail 30

# –ü–æ—à—É–∫ –ø–æ–º–∏–ª–æ–∫
Select-String -Path "logs\error-*.log" -Pattern "MongoDB"
```

---

## ‚ö° Performance

### –û–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—ó

#### WebSocket Compression
```typescript
{
  perMessageDeflate: {
    level: 3,              // –ë–∞–ª–∞–Ω—Å —à–≤–∏–¥–∫—ñ—Å—Ç—å/—Å—Ç–∏—Å–Ω–µ–Ω–Ω—è
    threshold: 1024,       // –°—Ç–∏—Å–∫–∞—Ç–∏ —Ç—ñ–ª—å–∫–∏ >1KB
    chunkSize: 1024
  }
}
```
**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚¨áÔ∏è 60-70% –∑–º–µ–Ω—à–µ–Ω–Ω—è —Ç—Ä–∞—Ñ—ñ–∫—É

#### Frame Buffering
- Circular buffer (50 —Ñ—Ä–µ–π–º—ñ–≤)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ —Å–∫–∏–¥–∞–Ω–Ω—è —Å—Ç–∞—Ä–∏—Ö —Ñ—Ä–µ–π–º—ñ–≤
- Memory tracking

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** üìâ -40% —Å–ø–æ–∂–∏–≤–∞–Ω–Ω—è RAM

#### FFmpeg Tuning
```bash
-preset veryfast          # –®–≤–∏–¥–∫–µ –∫–æ–¥—É–≤–∞–Ω–Ω—è
-tune zerolatency         # –ú—ñ–Ω—ñ–º–∞–ª—å–Ω–∞ –∑–∞—Ç—Ä–∏–º–∫–∞
-threads 4                # 4 CPU —è–¥—Ä–∞
-g 60                     # GOP size (2 —Å–µ–∫ @ 30fps)
-b:v 2500k                # Video bitrate
-maxrate 3000k            # Max bitrate
-bufsize 6000k            # Buffer size
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** 
- ‚ö° –ó–∞—Ç—Ä–∏–º–∫–∞: 5-8s (–±—É–ª–æ 15-30s)
- üí™ CPU: -35%
- üì¶ –†–æ–∑–º—ñ—Ä —Å–µ–≥–º–µ–Ω—Ç—ñ–≤: -25%

#### Memory Management
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ GC –ø—Ä–∏ >80% heap
- Cleanup –∫–æ–∂–Ω—ñ 30 —Å–µ–∫—É–Ω–¥
- Buffer limits

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- üìâ Memory leaks: eliminated
- üîÑ GC frequency: -50%
- üíæ Heap usage: <80% —Å—Ç–∞–±—ñ–ª—å–Ω–æ

### Benchmarks

| Metric | Before | After | Improvement |
|--------|---------|-------|-------------|
| CPU Usage | 45-60% | 25-35% | **-33%** |
| Memory (Heap) | 250-400 MB | 150-250 MB | **-40%** |
| FPS | 20-25 | 28-30 | **+25%** |
| Latency (HLS) | 15-30s | 5-8s | **-67%** |
| Bandwidth | ~5 Mbps | ~3.5 Mbps | **-30%** |
| Max Connections | 200 | 500+ | **+150%** |
| Frame Drops | 15-20% | 2-5% | **-75%** |

---

## üîß Configuration

### Environment Variables

```env
# MongoDB Connection
MONGODB_URI=mongodb://localhost:27017/capturestream

# Server Configuration
PORT=3001
HOST=0.0.0.0
NODE_ENV=development

# Domain (Production)
DOMAIN=capturestream.com
PUBLIC_URL=http://capturestream.com
RTMP_URL=rtmp://capturestream.com:1935/live
HLS_URL=http://capturestream.com:8888/live

# Logging
LOG_LEVEL=info          # error, warn, info, debug

# RTMP Settings
RTMP_PORT=1935
HTTP_PORT=8888

# Security
JWT_SECRET=your-secret-key-change-this-in-production
```

### Performance Config (src/config.ts)

```typescript
export const config = {
  websocket: {
    perMessageDeflate: { level: 3, threshold: 1024 },
    maxPayload: 10 * 1024 * 1024
  },
  frames: {
    maxBufferSize: 50,
    dropOldFrames: true,
    jpegQuality: 85,
    targetFPS: 30
  },
  memory: {
    maxHeapUsage: 0.8,
    gcInterval: 60000,
    cleanupInterval: 30000
  },
  rtmp: {
    chunkSize: 60000,
    gopCache: true,
    ffmpeg: {
      threads: 4,
      preset: 'veryfast',
      tune: 'zerolatency'
    }
  }
};
```

---

## üöÄ Production Deployment

### PM2 Setup

#### ecosystem.config.js

```javascript
module.exports = {
  apps: [
    {
      name: 'capturestream-web',
      script: './dist/server.js',
      instances: 'max',
      exec_mode: 'cluster',
      env: {
        NODE_ENV: 'production',
        PORT: 3001
      },
      max_memory_restart: '500M',
      error_file: './logs/pm2-error.log',
      out_file: './logs/pm2-out.log'
    },
    {
      name: 'capturestream-rtmp',
      script: './dist/rtmp-server.js',
      instances: 1,
      env: {
        NODE_ENV: 'production'
      },
      max_memory_restart: '500M'
    }
  ]
};
```

#### PM2 Commands

```bash
# Install PM2
npm install -g pm2

# Start
pm2 start ecosystem.config.js

# Status
pm2 status

# Logs
pm2 logs

# Monitor
pm2 monit

# Restart
pm2 restart all

# Stop
pm2 stop all

# Save configuration
pm2 save

# Auto-start on boot
pm2 startup
```

### Nginx Reverse Proxy

```nginx
server {
    listen 80;
    server_name capturestream.com www.capturestream.com;

    # WebSocket Server
    location / {
        proxy_pass http://localhost:3001;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_cache_bypass $http_upgrade;
    }

    # HLS Streams
    location /live/ {
        proxy_pass http://localhost:8888;
        add_header Cache-Control no-cache;
        add_header Access-Control-Allow-Origin *;
    }

    # Static files cache
    location ~* \.(js|css|png|jpg|jpeg|gif|ico|svg)$ {
        expires 1y;
        add_header Cache-Control "public, immutable";
    }
}
```

### SSL/HTTPS (Let's Encrypt)

```bash
# Install Certbot
sudo apt install certbot python3-certbot-nginx

# Get certificate
sudo certbot --nginx -d capturestream.com -d www.capturestream.com

# Auto-renewal
sudo certbot renew --dry-run
```

---

## üß™ Testing

### Health Check

```bash
curl http://localhost:3001/api/health
```

Response:
```json
{
  "status": "healthy",
  "timestamp": "2024-10-06T10:00:00.000Z",
  "uptime": 3600,
  "database": {
    "connected": true,
    "name": "capturestream"
  }
}
```

### Load Testing

```bash
# Install artillery
npm install -g artillery

# Run load test
artillery quick --count 100 --num 10 http://localhost:3001

# Custom scenario
artillery run test/load-test.yml
```

### Manual Testing

```bash
# Get streams list
curl http://localhost:3001/api/streams

# Get specific stream
curl http://localhost:3001/api/streams/stream_id

# MongoDB check
mongosh
use capturestream
db.streams.find().pretty()
```

---

## üêõ Troubleshooting

### Server –Ω–µ –∑–∞–ø—É—Å–∫–∞—î—Ç—å—Å—è

```powershell
# –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ø–æ—Ä—Ç–∏
netstat -an | findstr "3001 1935 8888"

# –í–±–∏–π—Ç–µ –ø—Ä–æ—Ü–µ—Å–∏
taskkill /F /IM node.exe

# –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ª–æ–≥–∏
Get-Content logs\error-*.log -Tail 50
```

### MongoDB –Ω–µ –ø—ñ–¥–∫–ª—é—á–∞—î—Ç—å—Å—è

```powershell
# –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —Å–ª—É–∂–±—É
Get-Service MongoDB

# –ó–∞–ø—É—Å—Ç—ñ—Ç—å MongoDB
net start MongoDB

# –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ connection string
echo $env:MONGODB_URI

# Test connection
mongosh mongodb://localhost:27017/capturestream
```

### RTMP streaming –Ω–µ –ø—Ä–∞—Ü—é—î

1. **–ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ FFmpeg:**
```bash
ffmpeg -version
```

2. **–ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ø–æ—Ä—Ç 1935:**
```powershell
netstat -an | findstr "1935"
```

3. **–ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ OBS –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è:**
   - Server: `rtmp://localhost:1935/live`
   - Stream Key: –Ω–µ –ø—É—Å—Ç–∏–π

4. **–ü–µ—Ä–µ–≥–ª—è–Ω—å—Ç–µ –ª–æ–≥–∏:**
```powershell
Get-Content logs\rtmp-*.log -Wait
```

### High memory usage

```powershell
# –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ PM2
pm2 monit

# Force restart
pm2 restart all

# Clear logs
pm2 flush
```

---

## üìö Resources

### Official Documentation
- [Node.js Best Practices](https://github.com/goldbergyoni/nodebestpractices)
- [MongoDB Manual](https://www.mongodb.com/docs/manual/)
- [FFmpeg Documentation](https://ffmpeg.org/documentation.html)
- [OBS Studio Wiki](https://obsproject.com/wiki/)
- [WebSocket API](https://developer.mozilla.org/en-US/docs/Web/API/WebSocket)

### Related Projects
- [node-media-server](https://github.com/illuspas/Node-Media-Server)
- [Mongoose ODM](https://mongoosejs.com/)
- [Winston Logger](https://github.com/winstonjs/winston)
- [PM2](https://pm2.keymetrics.io/)

### Tutorials
- [RTMP Setup Guide](./RTMP-SETUP.md)
- [MongoDB Setup](./MONGODB-SETUP.md)
- [Production Deployment](./PRODUCTION-DEPLOYMENT.md)

---

## ü§ù Contributing

Contributions are welcome! Please follow these steps:

1. Fork the repository
2. Create a feature branch: `git checkout -b feature/amazing-feature`
3. Commit your changes: `git commit -m 'Add amazing feature'`
4. Push to the branch: `git push origin feature/amazing-feature`
5. Open a Pull Request

### Development Guidelines

- Follow TypeScript best practices
- Add tests for new features
- Update documentation
- Use conventional commits
- Keep code DRY

---

## üìÑ License

MIT License

Copyright (c) 2024 Yaroslav

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

---

## üë• Team

- **Developer**: Yaroslav
- **GitHub**: [@Stefect](https://github.com/Stefect)
- **Repository**: [informator-2025](https://github.com/Stefect/informator-2025)
- **Domain**: [capturestream.com](http://capturestream.com)

---

## üéâ Acknowledgments

Special thanks to:

- **Node Media Server** for RTMP support
- **MongoDB** team for excellent database
- **Winston** for logging capabilities
- **FFmpeg** for video transcoding
- **Community** for support and feedback

---

## üìÆ Support

Need help? Reach out:

- üêõ **Issues**: [GitHub Issues](https://github.com/Stefect/informator-2025/issues)
- üí¨ **Discussions**: [GitHub Discussions](https://github.com/Stefect/informator-2025/discussions)
- üìß **Email**: support@capturestream.com

---

## üó∫Ô∏è Roadmap

### ‚úÖ v2.0.0 (Current)
- MongoDB integration
- Enhanced logging
- Performance optimization
- Production setup
- RTMP server
- HLS conversion

### üöß v2.1.0 (In Progress)
- [ ] User authentication (JWT)
- [ ] Real-time chat system
- [ ] Video thumbnails generation
- [ ] Advanced analytics dashboard
- [ ] Email notifications

### üìÖ v2.2.0 (Planned)
- [ ] Redis caching layer
- [ ] Elasticsearch –¥–ª—è –ª–æ–≥—ñ–≤
- [ ] CDN integration
- [ ] Mobile apps (React Native)
- [ ] AI-powered moderation

### üîÆ v3.0.0 (Future)
- [ ] WebRTC support (<1s latency)
- [ ] Multi-quality streaming (ABR)
- [ ] Live editing tools
- [ ] Monetization features
- [ ] Enterprise features

---

## üìä Project Stats

```
Lines of Code:        10,000+
Documentation:        2,000+ lines
Files:                50+
Dependencies:         25+
Database Collections: 3
API Endpoints:        10+
Development Time:     3+ weeks
```

---

<div align="center">

### üåü Built with ‚ù§Ô∏è using Node.js, MongoDB, and FFmpeg

[üåê Live Demo](http://capturestream.com) ‚Ä¢ [üìÅ Repository](https://github.com/Stefect/informator-2025) ‚Ä¢ [üìñ Documentation](./ARCHITECTURE.md) ‚Ä¢ [üíæ Setup Guide](./MONGODB-SETUP.md)

**Star ‚≠ê this repo if you found it helpful!**

</div>

---

## üì∏ Screenshots

### Main Page
![Main Page](docs/screenshots/main-page.png)

### Studio Interface  
![Studio](docs/screenshots/studio.png)

### Watch Page
![Watch](docs/screenshots/watch.png)

### Admin Dashboard
![Dashboard](docs/screenshots/dashboard.png)

---

**Last Updated**: October 6, 2024  
**Version**: 2.0.0  
**Status**: Production Ready ‚úÖ
