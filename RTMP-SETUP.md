# üì° RTMP Setup Guide - –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è OBS Studio

## üéØ –®–≤–∏–¥–∫–∏–π —Å—Ç–∞—Ä—Ç

### 1. ‚¨áÔ∏è –í—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å FFmpeg
**Windows:**
1. –ó–∞–≤–∞–Ω—Ç–∞–∂—Ç–µ: https://www.gyan.dev/ffmpeg/builds/ffmpeg-release-essentials.zip
2. –†–æ–∑–ø–∞–∫—É–π—Ç–µ –≤ `C:\ffmpeg`
3. –î–æ–¥–∞–π—Ç–µ `C:\ffmpeg\bin` –¥–æ PATH

**–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞:**
```bash
ffmpeg -version
```

---

## üé• –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è OBS Studio

### 1. –í—ñ–¥–∫—Ä–∏–π—Ç–µ –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è ‚Üí Stream

### 2. –í–∏–±–µ—Ä—ñ—Ç—å "Custom..."

### 3. –í–≤–µ–¥—ñ—Ç—å –¥–∞–Ω—ñ:

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–Ω—è |
|----------|----------|
| **Server** | `rtmp://localhost:1935/live` |
| **Stream Key** | `your_stream_name` (–±—É–¥—å-—è–∫–∞ –Ω–∞–∑–≤–∞) |

### 4. –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –≤–∏–≤–æ–¥—É (Settings ‚Üí Output)

**Streaming:**
- Output Mode: `Advanced`
- Encoder: `x264`
- Rate Control: `CBR`
- Bitrate: `2500 Kbps` (–¥–ª—è 720p)
- Keyframe Interval: `2`
- CPU Usage Preset: `veryfast`

---

## üîó URL –¥–ª—è –ø–µ—Ä–µ–≥–ª—è–¥—É

### HLS (—Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ –¥–ª—è –±—Ä–∞—É–∑–µ—Ä—ñ–≤):
```
http://localhost:8000/live/your_stream_name/index.m3u8
```

### HTTP-FLV (–Ω–∏–∑—å–∫–∞ –∑–∞—Ç—Ä–∏–º–∫–∞):
```
http://localhost:8000/live/your_stream_name.flv
```

### RTMP (–¥–ª—è –ø–ª–µ—î—Ä—ñ–≤):
```
rtmp://localhost:1935/live/your_stream_name
```

---

## üì∫ –ü–µ—Ä–µ–≥–ª—è–¥ –≤ –±—Ä–∞—É–∑–µ—Ä—ñ

### –í–∏–∫–æ—Ä–∏—Å—Ç–∞–π—Ç–µ Video.js –∞–±–æ hls.js:

```html
<video id="video" controls></video>
<script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
<script>
  const video = document.getElementById('video');
  const hls = new Hls();
  hls.loadSource('http://localhost:8000/live/your_stream_name/index.m3u8');
  hls.attachMedia(video);
</script>
```

---

## üîß –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —è–∫–æ—Å—Ç—ñ

### 1080p 60fps:
- Bitrate: `6000 Kbps`
- Resolution: `1920x1080`
- FPS: `60`

### 720p 30fps (—Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ):
- Bitrate: `2500 Kbps`
- Resolution: `1280x720`
- FPS: `30`

### 480p (–¥–ª—è —Å–ª–∞–±–∫–æ–≥–æ —ñ–Ω—Ç–µ—Ä–Ω–µ—Ç—É):
- Bitrate: `1000 Kbps`
- Resolution: `854x480`
- FPS: `30`

---

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª—ñ–≤

```
media/
‚îú‚îÄ‚îÄ recordings/          # –ó–∞–ø–∏—Å–∞–Ω—ñ —Å—Ç—Ä—ñ–º–∏ (.mp4)
‚îÇ   ‚îú‚îÄ‚îÄ live_stream1_2025-01-15.mp4
‚îÇ   ‚îî‚îÄ‚îÄ live_stream2_2025-01-15.mp4
‚îî‚îÄ‚îÄ hls/                # HLS —Å–µ–≥–º–µ–Ω—Ç–∏ (.ts + .m3u8)
    ‚îî‚îÄ‚îÄ live/
        ‚îî‚îÄ‚îÄ your_stream_name/
            ‚îú‚îÄ‚îÄ index.m3u8
            ‚îú‚îÄ‚îÄ segment0.ts
            ‚îú‚îÄ‚îÄ segment1.ts
            ‚îî‚îÄ‚îÄ segment2.ts
```

---

## üêõ Troubleshooting

### ‚ùå OBS –Ω–µ –º–æ–∂–µ –ø—ñ–¥–∫–ª—é—á–∏—Ç–∏—Å—å
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —á–∏ –∑–∞–ø—É—â–µ–Ω–∏–π RTMP —Å–µ—Ä–≤–µ—Ä
- –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—å, —â–æ –ø–æ—Ä—Ç 1935 –Ω–µ –∑–∞–π–Ω—è—Ç–∏–π
- –°–ø—Ä–æ–±—É–π—Ç–µ —ñ–Ω—à–∏–π Stream Key

### ‚ùå –í—ñ–¥–µ–æ –Ω–µ –≤—ñ–¥—Ç–≤–æ—Ä—é—î—Ç—å—Å—è
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —á–∏ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–π FFmpeg
- –ü–æ–¥–∏–≤—ñ—Ç—å—Å—è –ª–æ–≥–∏: `logs/rtmp.log`
- –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—å, —â–æ HLS —Ñ–∞–π–ª–∏ —Å—Ç–≤–æ—Ä—é—é—Ç—å—Å—è –≤ `media/hls/`

### ‚ùå –ó–∞—Ç—Ä–∏–º–∫–∞ –±—ñ–ª—å—à–µ 10 —Å–µ–∫—É–Ω–¥
- –ó–º–µ–Ω—à—ñ—Ç—å `hls_time` –≤ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó
- –í–∏–∫–æ—Ä–∏—Å—Ç–∞–π—Ç–µ HTTP-FLV –∑–∞–º—ñ—Å—Ç—å HLS
- –°–ø—Ä–æ–±—É–π—Ç–µ WebRTC (–≤ –Ω–∞—Å—Ç—É–ø–Ω—ñ–π –≤–µ—Ä—Å—ñ—ó)

---

## üöÄ –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä—ñ–≤

### –í–∞—Ä—ñ–∞–Ω—Ç 1: –û–∫—Ä–µ–º–æ
```bash
# –¢–µ—Ä–º—ñ–Ω–∞–ª 1: WebSocket —Å–µ—Ä–≤–µ—Ä
npm start

# –¢–µ—Ä–º—ñ–Ω–∞–ª 2: RTMP —Å–µ—Ä–≤–µ—Ä
npm run rtmp
```

### –í–∞—Ä—ñ–∞–Ω—Ç 2: –†–∞–∑–æ–º (—Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ)
```bash
npm run start:all
```

---

## üìä –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥

### API endpoints:
- `GET /api/streams` - –ê–∫—Ç–∏–≤–Ω—ñ —Å—Ç—Ä—ñ–º–∏
- `GET /api/recordings` - –ó–∞–ø–∏—Å–∞–Ω—ñ –≤—ñ–¥–µ–æ
- `GET /api/stream/:id` - –Ü–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è –ø—Ä–æ —Å—Ç—Ä—ñ–º

### –õ–æ–≥–∏:
- `logs/rtmp.log` - RTMP —Å–µ—Ä–≤–µ—Ä
- `logs/combined.log` - –ó–∞–≥–∞–ª—å–Ω—ñ –ª–æ–≥–∏

---

## üéØ –ù–∞—Å—Ç—É–ø–Ω—ñ –∫—Ä–æ–∫–∏

1. ‚úÖ –ó–∞–ø—É—Å—Ç—ñ—Ç—å RTMP —Å–µ—Ä–≤–µ—Ä
2. ‚úÖ –ù–∞–ª–∞—à—Ç—É–π—Ç–µ OBS
3. ‚úÖ –ü–æ—á–Ω—ñ—Ç—å —Ç—Ä–∞–Ω—Å–ª—è—Ü—ñ—é
4. ‚úÖ –í—ñ–¥–∫—Ä–∏–π—Ç–µ http://localhost:3001
5. ‚úÖ –í–∞—à —Å—Ç—Ä—ñ–º –∑'—è–≤–∏—Ç—å—Å—è –Ω–∞ –≥–æ–ª–æ–≤–Ω—ñ–π

---

## üí° –ü–æ—Ä–∞–¥–∏

- –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ **—É–Ω—ñ–∫–∞–ª—å–Ω–∏–π Stream Key** –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ —Å—Ç—Ä—ñ–º–µ—Ä–∞
- –ó–∞–ø–∏—Å–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è –≤ `media/recordings/`
- HLS –º–∞—î –∑–∞—Ç—Ä–∏–º–∫—É ~10-20 —Å–µ–∫—É–Ω–¥ (—Ü–µ –Ω–æ—Ä–º–∞–ª—å–Ω–æ)
- –î–ª—è –∑–º–µ–Ω—à–µ–Ω–Ω—è –∑–∞—Ç—Ä–∏–º–∫–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ WebRTC (–≤ —Ä–æ–∑—Ä–æ–±—Ü—ñ)

---

**–ü–æ—Ç—Ä—ñ–±–Ω–∞ –¥–æ–ø–æ–º–æ–≥–∞?** –ù–∞–ø–∏—à—ñ—Ç—å –≤ issues –∞–±–æ –ø–µ—Ä–µ–≥–ª—è–Ω—å—Ç–µ FAQ
